<html>
<script type="text/javascript" src="js/d3.min.js"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>


<body>

	<script>
		var bardata = []; //array that holds the current value for the candlestick chart
		var pastRectangles = []

		setInterval(function () {
			var x = Math.floor(Math.random() * 100)
			bardata.push(x);
			console.log(bardata)
		}, 1000);
		
		var height = 900
			, width = 1300
			, barWidth = 50
			, barOffset = 55;

		var scale = d3.scale.linear()
			.range([d3.max(pastRectangles),0])
			.domain([height, 0]);


		var svg = d3.select('body')
			.append('svg')
			.attr('width', width)
			.attr('height', height)
			.style('background', '#C9D7D6')
		
		

		function update(bardata) {

			var rect = svg.selectAll('rect').data([bardata]);

			rect.enter()
				.append("rect")
				.attr("x", width - (barOffset+barWidth))
				.attr("y", height / 2 - bardata)
				.attr("height", bardata)
				.attr("width", 60)
				.attr("fill", "green")

			rect.transition()
				.duration(1000)
				.ease('linear')
				.attr("height", function (d) {
					return d
				});
			
			//console.log(bardata);
		}
		function pastdraw()
		{

			var pastRect = svg.selectAll('rect').data(pastRectangles);
		    pastRect.enter()
				.append("rect")
				.attr("x", function(d,i){return (width- ((i-1) * (barOffset + barWidth)))})
				.attr("y", function(d){return height / 2 - d})
				.attr("height", function(d){return d})
				.attr("width", 60)
				.attr("fill", "green")
		}
				//pastdraw();
		
		
		
		
		setInterval(function () {
			update(bardata);
			bardata.shift();
		}, 1000)
			setInterval(function () {
			pastRectangles.push(bardata)
			pastdraw();
		}, 1000)
	</script>
	<div class="message">
	</div>



</body>

</html>