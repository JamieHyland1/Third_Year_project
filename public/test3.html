<html>
<script type="text/javascript" src="js/d3.min.js"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>


<body>

	<script>

		var t = 1297110663, // start time (seconds since epoch)
			v = 70, // start value (subscribers)
			data = d3.range(33).map(next); // starting dataset

		function next() {
			return Math.floor(Math.random()*100)
		}

		setInterval(function () {
			data.shift();
			data.push(next());
			redraw();
		}, 1500);
		
		
		 var w = 20,
			 h = 80;
  
  var x = d3.scale.linear()
      .domain([0, 1])
      .range([0, w]);
  
  var y = d3.scale.linear()
      .domain([0, 100])
     .rangeRound([0, h]);
		
		
	var chart = d3.select("body")
   .append("svg:svg")
     .attr("class", "chart")
     .attr("width", w * data.length - 1)
     .attr("height", h);	
		
		
	 chart.selectAll("rect")
     .data(data)
	 .enter().append("svg:rect")
     .attr("x", function(d, i) { return x(i) - .5; })
     .attr("y", function(d) { return h - y(d) - .5; })
     .attr("width", w)
     .attr("height", function(d) { return y(d); })
	 .attr("fill", "steelblue")	
	 .attr("stroke", "white")
	 
	 
	chart.append("svg:line")
     .attr("x1", 0)
     .attr("x2", w * data.length)
     .attr("y1", h - .5)
     .attr("y2", h - .5)
     .attr("stroke", "#000");
		
	 function redraw() {
   var rect = chart.selectAll("rect")
        .data(data, function(d) { return d; });
  
    rect.enter().insert("svg:rect", "line")
        .attr("x", function(d, i) { return x(i + 1) - .5; })
        .attr("y", function(d) { return h - y(d) - .5; })
        .attr("width", w)
       .attr("height", function(d) { return y(d); })
     .transition()
       .duration(1000)
       .attr("x", function(d, i) { return x(i) - .5; });
 
   rect.transition()
       .duration(1000)
       .attr("x", function(d, i) { return x(i) - .5; });
 
   rect.exit().transition()
       .duration(1000)
       .attr("x", function(d, i) { return x(i - 1) - .5; })
       .remove();
 
 }
		
		
		
		
		
	</script>
	<div class="message">
	</div>



</body>

</html>